{% extends "header.html" %}
{% load permission_tags %}

{% block content %}

<div class="jumbotron">


    <h1 class="display-1">{{event.name}}</h1>
    <h4 class="lead">{{event.start}} - {{event.end}}</h4>

    <div id="accordion" role="tablist">
        <div class="card">
            <div class="card-header" role="tab" id="headingOne">
                <h5 class="mb-0">
                    <a data-toggle="collapse" href="#collapseOne" role="button" aria-expanded="true"
                       aria-controls="collapseOne">
                        {{event.location}}: {{event.address}} {{event.city}}, {{event.state}} {{event.zip_code}}
                    </a>
                </h5>
            </div>

            <div id="collapseOne" class="collapse toggle" role="tabpanel" aria-labelledby="headingOne"
                 data-parent="#accordion">
                <style>
                    .intrinsic-container {
                        position: relative;
                        height: 0;
                        overflow: hidden;
                    }

                    /* 16x9 Aspect Ratio */
                    .intrinsic-container-16x9 {
                        padding-bottom: 56.25%;
                    }

                    /* 4x3 Aspect Ratio */
                    .intrinsic-container-4x3 {
                        padding-bottom: 75%;
                    }

                    .intrinsic-container iframe {
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                    }
                </style>
                <div class="card-body intrinsic-container intrinsic-container-16x9">
                    <iframe width="125"
                            src="https://www.google.com/maps/embed/v1/search?q={{event.address}} {{event.city}}, {{event.state}} {{event.zip_code}}&key=AIzaSyB-YQD-s4ery8KQRnzX7FhZsBC4SeFRcjA"
                            allowfullscreen></iframe>
                </div>


                <p class="text-danger">Map will only function correctly if a valid address has been entered</p>
            </div>
        </div>

        <h1></h1>
        <p class="text-left">{{event.description}}</p>
    </div>

    {% if request.user|has_group:"Organizer" %}
    <div class="row">
        <a class="col-sm-10" href="{{event.id}}/edit/?type={{event.type}}">
            <button class="btn btn-primary btn-block">Edit</button>
        </a>
        <a class="col-sm-2" href="{% url 'deleteEvent' event_id=event.id %}?next={{ '/home/feed/'|urlencode }}">
            <button class="btn btn-danger btn-block">Delete</button>
        </a>
    </div>
    {% endif %}

</div>




  <h3>Volunteer Slots</h3>
  {% if is_organizer %}
  <a href="{% url 'addSlot' event_id=event.id %}">
    <button class="btn btn-secondary">Add Slot</button>
  </a>
  {% endif %}
  <table class="table table-hover" style="margin:20px;">
    <thread>
      <tr>
        <th>Name</th>
        <th>Start</th>
        <th>End</th>
        <th>Volunteers</th>
        <th></th>
      </tr>
    </thread>
    <tbody>
      {% for slot in event.slot_set.all|dictsort:"start" %}
        <tr>
          <th><a href="http://127.0.0.1:8000/volunteer/slot/{{slot.id}}">{{slot.title}}</a></th>
          <th>{{slot.start}}</th>
          <th>{{slot.end}}</th>
          <th>{{slot.volunteers}}</th>
          <th>
            {% if is_organizer %}
            <div class="btn-group">
                <button class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Delete</button>
              <div class="dropdown-menu">
                <p class="dropdown-item" href="">Are you sure?</p>
                <a class="dropdown-item" href="{% url 'deleteSlot' slot_id=slot.id %}?next={{ request.path|urlencode }}"><button class="btn btn-danger">Yes</button></a>
              </div>
            </div>
            {% endif %}
          </th>
        </tr>
      {% endfor %}
    </tbody>
  </table>

<<<<<<< HEAD
  {% if is_organizer %}
    <div class="row">
      <a class="col-sm-10" href="{{event.id}}/edit/?type={{event.type}}">
        <button class="btn btn-primary btn-block">Edit</button>
      </a>
      <a class="col-sm-2" href="{% url 'deleteEvent' event_id=event.id %}?next={{ '/home/feed/'|urlencode }}">
        <button class="btn btn-danger btn-block">Delete</button>
      </a>
    </div>
  {% endif %}

=======
>>>>>>> d6b267d4f27e3ae102ae247570a8aeecb76727cc
{% endblock %}
